$ docker compose up --build tee-client tee-host
Compose can now delegate builds to bake for better performance.
 To do so, set COMPOSE_BAKE=true.
[+] Building 0.7s (23/23) FINISHED                                                                                                                  docker:default
 => [tee-host internal] load build definition from Dockerfile                                                                                                 0.0s
 => => transferring dockerfile: 795B                                                                                                                          0.0s
 => [tee-client internal] load build definition from Dockerfile                                                                                               0.0s
 => => transferring dockerfile: 714B                                                                                                                          0.0s
 => [tee-host internal] load metadata for docker.io/library/ubuntu:latest                                                                                     0.0s
 => [tee-host internal] load .dockerignore                                                                                                                    0.0s
 => => transferring context: 2B                                                                                                                               0.0s
 => [tee-client internal] load metadata for docker.io/library/node:22.16.0-alpine                                                                             0.2s
 => [tee-host 1/8] FROM docker.io/library/ubuntu:latest                                                                                                       0.0s
 => CACHED [tee-host 2/8] RUN apt-get update && apt-get install -y     curl     git     build-essential                                                       0.0s
 => CACHED [tee-host 3/8] RUN apt-get install -y     llvm     clang     libclang-dev     pkg-config     cmake                                                 0.0s
 => CACHED [tee-host 4/8] WORKDIR /app/src                                                                                                                    0.0s
 => CACHED [tee-host 5/8] RUN curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y                                                         0.0s
 => CACHED [tee-host 6/8] RUN git clone https://github.com/Dstack-TEE/dstack.git                                                                              0.0s
 => CACHED [tee-host 7/8] WORKDIR /app/src/dstack/sdk/simulator                                                                                               0.0s
 => CACHED [tee-host 8/8] RUN ./build.sh                                                                                                                      0.0s
 => [tee-host] exporting to image                                                                                                                             0.0s
 => => exporting layers                                                                                                                                       0.0s
 => => writing image sha256:5b857a4744a46fb9955b0e9d1da545d6e4e49e930103d7b58dc4e95f71ad1570                                                                  0.0s
 => => naming to docker.io/library/permissionless-tee-host                                                                                                    0.0s
 => [tee-client internal] load .dockerignore                                                                                                                  0.1s
 => => transferring context: 2B                                                                                                                               0.0s
 => [tee-host] resolving provenance for metadata file                                                                                                         0.0s
 => [tee-client base 1/2] FROM docker.io/library/node:22.16.0-alpine@sha256:41e4389f3d988d2ed55392df4db1420ad048ae53324a8e2b7c6d19508288107e                  0.0s
 => [tee-client internal] load build context                                                                                                                  0.0s
 => => transferring context: 2.60kB                                                                                                                           0.0s
 => CACHED [tee-client base 2/2] WORKDIR /usr/src/app                                                                                                         0.0s
 => CACHED [tee-client dev 1/2] RUN --mount=type=bind,source=package.json,target=package.json     --mount=type=bind,source=package-lock.json,target=package-  0.0s
 => [tee-client dev 2/2] COPY . .                                                                                                                             0.1s
 => [tee-client] exporting to image                                                                                                                           0.1s
 => => exporting layers                                                                                                                                       0.1s
 => => writing image sha256:f606e9d9fb6b05d2c768a70a6326f650a9ed05eef7e76a26b0cd9da4a6c91917                                                                  0.0s
 => => naming to docker.io/library/permissionless-tee-client                                                                                                  0.0s
 => [tee-client] resolving provenance for metadata file                                                                                                       0.0s
[+] Running 4/4
 ✔ tee-client                             Built                                                                                                               0.0s 
 ✔ tee-host                               Built                                                                                                               0.0s 
 ✔ Container permissionless-tee-host-1    Created                                                                                                             0.0s 
 ✔ Container permissionless-tee-client-1  Recreated                                                                                                           0.1s 
Attaching to tee-client-1, tee-host-1
tee-host-1    | 2025-06-23T19:01:14.587271Z  INFO load_config: Loading config file: ./dstack.toml
tee-host-1    | 2025-06-23T19:01:14.587896Z  INFO config{profile=internal-v0}: rocket::config: http2=true log_level="DEBUG" log_format=Compact cli_colors=auto workers=8 max_blocking=64 ident=Dstack Simulator ip_header="X-Real-IP" limits={"bytes": 8KiB, "data-form": 2MiB, "file": 1MiB, "form": 32KiB, "json": 1MiB, "msgpack": 1MiB, "string": 8KiB} temp_dir=/tmp keep_alive=10 shutdown.ctrlc=true shutdown.signals={"SIGTERM"} shutdown.grace=2 shutdown.mercy=3 shutdown.force=true
tee-host-1    | 2025-06-23T19:01:14.588000Z  INFO routes{count=2}: rocket::route: name="prpc_post" rank=-1 method=POST uri=/prpc/<method> uri.base=/prpc/ uri.unmounted=/<method> location=guest-agent/src/main.rs:56
tee-host-1    | 2025-06-23T19:01:14.588008Z  INFO routes{count=2}: rocket::route: name="prpc_get" rank=-1 method=GET uri=/prpc/<method> uri.base=/prpc/ uri.unmounted=/<method> location=guest-agent/src/main.rs:56
tee-host-1    | 2025-06-23T19:01:14.588016Z  INFO fairings{count=1}: rocket::fairing: name="Shield" kind=liftoff, response, singleton
tee-host-1    | 2025-06-23T19:01:14.588247Z  INFO config{profile=internal}: rocket::config: http2=true log_level="DEBUG" log_format=Compact cli_colors=auto workers=8 max_blocking=64 ident=Dstack Simulator ip_header="X-Real-IP" limits={"bytes": 8KiB, "data-form": 2MiB, "file": 1MiB, "form": 32KiB, "json": 1MiB, "msgpack": 1MiB, "string": 8KiB} temp_dir=/tmp keep_alive=10 shutdown.ctrlc=true shutdown.signals={"SIGTERM"} shutdown.grace=2 shutdown.mercy=3 shutdown.force=true
tee-host-1    | 2025-06-23T19:01:14.588341Z  INFO routes{count=2}: rocket::route: name="prpc_post" rank=-1 method=POST uri=/<method> uri.base=/ uri.unmounted=/<method> location=guest-agent/src/main.rs:86
tee-host-1    | 2025-06-23T19:01:14.588346Z  INFO routes{count=2}: rocket::route: name="prpc_get" rank=-1 method=GET uri=/<method> uri.base=/ uri.unmounted=/<method> location=guest-agent/src/main.rs:86
tee-host-1    | 2025-06-23T19:01:14.588352Z  INFO fairings{count=1}: rocket::fairing: name="Shield" kind=liftoff, response, singleton
tee-host-1    | 2025-06-23T19:01:14.588554Z  INFO config{profile=external}: rocket::config: http2=true log_level="DEBUG" log_format=Compact cli_colors=auto workers=8 max_blocking=64 ident=Dstack Simulator ip_header="X-Real-IP" limits={"bytes": 8KiB, "data-form": 2MiB, "file": 1MiB, "form": 32KiB, "json": 1MiB, "msgpack": 1MiB, "string": 8KiB} temp_dir=/tmp keep_alive=10 shutdown.ctrlc=true shutdown.signals={"SIGTERM"} shutdown.grace=2 shutdown.mercy=3 shutdown.force=true
tee-host-1    | 2025-06-23T19:01:14.588661Z  INFO routes{count=5}: rocket::route: name="index" rank=-9 method=GET uri=/ uri.base=/ uri.unmounted=/ location=guest-agent/src/http_routes.rs:27
tee-host-1    | 2025-06-23T19:01:14.588667Z  INFO routes{count=5}: rocket::route: name="get_logs" rank=-6 method=GET uri=/logs/<container_name>?<since>&<until>&<follow>&<text>&<timestamps>&<bare>&<tail>&<ansi> uri.base=/ uri.unmounted=/logs/<container_name>?<since>&<until>&<follow>&<text>&<timestamps>&<bare>&<tail>&<ansi> location=guest-agent/src/http_routes.rs:95
tee-host-1    | 2025-06-23T19:01:14.588672Z  INFO routes{count=5}: rocket::route: name="metrics" rank=-9 method=GET uri=/metrics uri.base=/ uri.unmounted=/metrics location=guest-agent/src/http_routes.rs:77
tee-host-1    | 2025-06-23T19:01:14.588678Z  INFO routes{count=5}: rocket::route: name="prpc_post" rank=-1 method=POST uri=/prpc/<method> uri.base=/prpc uri.unmounted=/<method> location=guest-agent/src/main.rs:114
tee-host-1    | 2025-06-23T19:01:14.588683Z  INFO routes{count=5}: rocket::route: name="prpc_get" rank=-1 method=GET uri=/prpc/<method> uri.base=/prpc uri.unmounted=/<method> location=guest-agent/src/main.rs:114
tee-host-1    | 2025-06-23T19:01:14.588689Z  INFO fairings{count=2}: rocket::fairing: name="Shield" kind=liftoff, response, singleton
tee-host-1    | 2025-06-23T19:01:14.588692Z  INFO fairings{count=2}: rocket::fairing: name="Add app version header" kind=response
tee-host-1    | 2025-06-23T19:01:14.588851Z  INFO config{profile=guest-api}: rocket::config: http2=true log_level="DEBUG" log_format=Compact cli_colors=auto workers=8 max_blocking=64 ident=Dstack Simulator ip_header="X-Real-IP" limits={"bytes": 8KiB, "data-form": 2MiB, "file": 1MiB, "form": 32KiB, "json": 1MiB, "msgpack": 1MiB, "string": 8KiB} temp_dir=/tmp keep_alive=10 shutdown.ctrlc=true shutdown.signals={"SIGTERM"} shutdown.grace=2 shutdown.mercy=3 shutdown.force=true
tee-host-1    | 2025-06-23T19:01:14.588959Z  INFO routes{count=2}: rocket::route: name="prpc_post" rank=-1 method=POST uri=/api/<method> uri.base=/api uri.unmounted=/<method> location=guest-agent/src/main.rs:131
tee-host-1    | 2025-06-23T19:01:14.588964Z  INFO routes{count=2}: rocket::route: name="prpc_get" rank=-1 method=GET uri=/api/<method> uri.base=/api uri.unmounted=/<method> location=guest-agent/src/main.rs:131
tee-host-1    | 2025-06-23T19:01:14.588971Z  INFO fairings{count=1}: rocket::fairing: name="Shield" kind=liftoff, response, singleton
tee-host-1    | 2025-06-23T19:01:14.589104Z  INFO shield{policies=3}: rocket::header: name="X-Frame-Options" value="SAMEORIGIN"
tee-host-1    | 2025-06-23T19:01:14.589111Z  INFO shield{policies=3}: rocket::header: name="Permissions-Policy" value="interest-cohort=()"
tee-host-1    | 2025-06-23T19:01:14.589117Z  INFO shield{policies=3}: rocket::header: name="Permissions-Policy" value="interest-cohort=()"
tee-host-1    | 2025-06-23T19:01:14.589123Z  INFO shield{policies=3}: rocket::header: name="X-Frame-Options" value="SAMEORIGIN"
tee-host-1    | 2025-06-23T19:01:14.589126Z  INFO shield{policies=3}: rocket::header: name="X-Content-Type-Options" value="nosniff"
tee-host-1    | 2025-06-23T19:01:14.589130Z  INFO shield{policies=3}: rocket::header: name="X-Content-Type-Options" value="nosniff"
tee-host-1    | 2025-06-23T19:01:14.589150Z  INFO shield{policies=3}: rocket::header: name="X-Content-Type-Options" value="nosniff"
tee-host-1    | 2025-06-23T19:01:14.589153Z  INFO rocket::rkt: endpoint=unix:./guest.sock
tee-host-1    | 2025-06-23T19:01:14.589158Z  INFO shield{policies=3}: rocket::header: name="X-Frame-Options" value="SAMEORIGIN"
tee-host-1    | 2025-06-23T19:01:14.589162Z  INFO rocket::rkt: endpoint=unix:./external.sock
tee-host-1    | 2025-06-23T19:01:14.589161Z  INFO shield{policies=3}: rocket::header: name="X-Frame-Options" value="SAMEORIGIN"
tee-host-1    | 2025-06-23T19:01:14.589175Z  INFO shield{policies=3}: rocket::header: name="Permissions-Policy" value="interest-cohort=()"
tee-host-1    | 2025-06-23T19:01:14.589190Z  INFO shield{policies=3}: rocket::header: name="Permissions-Policy" value="interest-cohort=()"
tee-host-1    | 2025-06-23T19:01:14.589197Z  INFO shield{policies=3}: rocket::header: name="X-Content-Type-Options" value="nosniff"
tee-host-1    | 2025-06-23T19:01:14.589277Z  INFO rocket::rkt: endpoint=unix:./tappd.sock
tee-host-1    | 2025-06-23T19:01:14.589284Z  INFO rocket::rkt: endpoint=unix:./dstack.sock
tee-client-1  | 
tee-client-1  | > secure-computing-tee@0.1 dev
tee-client-1  | > node index.js
tee-client-1  | 
tee-host-1    | 2025-06-23T19:01:15.047393Z  INFO request{method=POST uri=/prpc/Tappd.Info}:routing{method=POST uri=/prpc/Tappd.Info format=application/json}: rocket::route: name="prpc_post" rank=-1 method=POST uri=/prpc/<method> uri.base=/prpc/ uri.unmounted=/<method> location=guest-agent/src/main.rs:56
tee-host-1    | 2025-06-23T19:01:15.047464Z  INFO request{method=POST uri=/prpc/Tappd.Info}:routing{method=POST uri=/prpc/Tappd.Info format=application/json}:prpc_post{id=0 method=Tappd.Info}: ra_rpc: dispatching request: Info
tee-host-1    | 2025-06-23T19:01:15.047707Z  INFO request{method=POST uri=/prpc/Tappd.Info}:routing{method=POST uri=/prpc/Tappd.Info format=application/json}: rocket::outcome: outcome="success" status=200
tee-host-1    | 2025-06-23T19:01:15.047720Z  INFO request{method=POST uri=/prpc/Tappd.Info}: rocket::response: status=200
tee-host-1    | 2025-06-23T19:01:15.049400Z  INFO request{method=POST uri=/prpc/Tappd.Info}:routing{method=POST uri=/prpc/Tappd.Info format=application/json}: rocket::route: name="prpc_post" rank=-1 method=POST uri=/prpc/<method> uri.base=/prpc/ uri.unmounted=/<method> location=guest-agent/src/main.rs:56
tee-host-1    | 2025-06-23T19:01:15.049421Z  INFO request{method=POST uri=/prpc/Tappd.Info}:routing{method=POST uri=/prpc/Tappd.Info format=application/json}:prpc_post{id=1 method=Tappd.Info}: ra_rpc: dispatching request: Info
tee-host-1    | 2025-06-23T19:01:15.049590Z  INFO request{method=POST uri=/prpc/Tappd.Info}:routing{method=POST uri=/prpc/Tappd.Info format=application/json}: rocket::outcome: outcome="success" status=200
tee-host-1    | 2025-06-23T19:01:15.049597Z  INFO request{method=POST uri=/prpc/Tappd.Info}: rocket::response: status=200
tee-host-1    | 2025-06-23T19:01:15.050367Z  INFO request{method=POST uri=/prpc/Tappd.DeriveKey}:routing{method=POST uri=/prpc/Tappd.DeriveKey format=application/json}: rocket::route: name="prpc_post" rank=-1 method=POST uri=/prpc/<method> uri.base=/prpc/ uri.unmounted=/<method> location=guest-agent/src/main.rs:56
tee-host-1    | 2025-06-23T19:01:15.050381Z  INFO request{method=POST uri=/prpc/Tappd.DeriveKey}:routing{method=POST uri=/prpc/Tappd.DeriveKey format=application/json}:prpc_post{id=2 method=Tappd.DeriveKey}: ra_rpc: dispatching request: DeriveKey
tee-host-1    | 2025-06-23T19:01:15.050611Z  INFO request{method=POST uri=/prpc/Tappd.DeriveKey}:routing{method=POST uri=/prpc/Tappd.DeriveKey format=application/json}: rocket::outcome: outcome="success" status=200
tee-host-1    | 2025-06-23T19:01:15.050619Z  INFO request{method=POST uri=/prpc/Tappd.DeriveKey}: rocket::response: status=200
tee-host-1    | 2025-06-23T19:01:15.051538Z  INFO request{method=POST uri=/prpc/Tappd.TdxQuote}:routing{method=POST uri=/prpc/Tappd.TdxQuote format=application/json}: rocket::route: name="prpc_post" rank=-1 method=POST uri=/prpc/<method> uri.base=/prpc/ uri.unmounted=/<method> location=guest-agent/src/main.rs:56
tee-host-1    | 2025-06-23T19:01:15.051658Z  INFO request{method=POST uri=/prpc/Tappd.TdxQuote}:routing{method=POST uri=/prpc/Tappd.TdxQuote format=application/json}:prpc_post{id=3 method=Tappd.TdxQuote}: ra_rpc: dispatching request: TdxQuote
tee-host-1    | 2025-06-23T19:01:15.051757Z  INFO request{method=POST uri=/prpc/Tappd.TdxQuote}:routing{method=POST uri=/prpc/Tappd.TdxQuote format=application/json}: rocket::outcome: outcome="success" status=200
tee-host-1    | 2025-06-23T19:01:15.051765Z  INFO request{method=POST uri=/prpc/Tappd.TdxQuote}: rocket::response: status=200
tee-client-1  | Querying from block 55812600 to 55812849...
tee-client-1  | Querying from block 55812850 to 55813099...
tee-client-1  | Querying from block 55813100 to 55813349...
tee-client-1  | Querying from block 55813350 to 55813599...
tee-client-1  | Querying from block 55813600 to 55813849...
tee-client-1  | Querying from block 55813850 to 55814099...
tee-client-1  | Querying from block 55814100 to 55814349...
tee-client-1  | Querying from block 55814350 to 55814599...
tee-client-1  | Querying from block 55814600 to 55814849...
tee-client-1  | Querying from block 55814850 to 55815099...
tee-client-1  | Querying from block 55815100 to 55815349...
tee-client-1  | Querying from block 55815350 to 55815599...
tee-client-1  | Querying from block 55815600 to 55815849...
tee-client-1  | Querying from block 55815850 to 55816099...
tee-client-1  | Querying from block 55816100 to 55816349...
tee-client-1  | Querying from block 55816350 to 55816599...
tee-client-1  | Querying from block 55816600 to 55816849...
tee-client-1  | Querying from block 55816850 to 55817099...
tee-client-1  | Querying from block 55817100 to 55817349...
tee-client-1  | Querying from block 55817350 to 55817599...
tee-client-1  | Querying from block 55817600 to 55817849...
tee-client-1  | Querying from block 55817850 to 55818099...
tee-client-1  | Querying from block 55818100 to 55818349...
tee-client-1  | Querying from block 55818350 to 55818599...
tee-client-1  | Querying from block 55818600 to 55818849...
tee-client-1  | Querying from block 55818850 to 55819099...
tee-client-1  | Querying from block 55819100 to 55819349...
tee-client-1  | Querying from block 55819350 to 55819599...
tee-client-1  | Querying from block 55819600 to 55819849...
tee-client-1  | Querying from block 55819850 to 55820099...
tee-client-1  | Querying from block 55820100 to 55820349...
tee-client-1  | Querying from block 55820350 to 55820599...
tee-client-1  | Querying from block 55820600 to 55820849...
tee-client-1  | Querying from block 55820850 to 55821099...
tee-client-1  | Querying from block 55821100 to 55821349...
tee-client-1  | Querying from block 55821350 to 55821599...
tee-client-1  | Querying from block 55821600 to 55821849...
tee-client-1  | Querying from block 55821850 to 55822099...
tee-client-1  | Querying from block 55822100 to 55822349...
tee-client-1  | Querying from block 55822350 to 55822599...
tee-client-1  | Querying from block 55822600 to 55822849...
tee-client-1  | Querying from block 55822850 to 55823099...
tee-client-1  | Querying from block 55823100 to 55823349...
tee-client-1  | Querying from block 55823350 to 55823599...
tee-client-1  | Querying from block 55823600 to 55823849...
tee-client-1  | Querying from block 55823850 to 55824099...
tee-client-1  | Querying from block 55824100 to 55824349...
tee-client-1  | Querying from block 55824350 to 55824599...
tee-client-1  | Querying from block 55824600 to 55824849...
tee-client-1  | Querying from block 55824850 to 55825099...
tee-client-1  | Querying from block 55825100 to 55825349...
tee-client-1  | Querying from block 55825350 to 55825599...
tee-client-1  | Querying from block 55825600 to 55825849...
tee-client-1  | Querying from block 55825850 to 55826099...
tee-client-1  | Querying from block 55826100 to 55826349...
tee-client-1  | Querying from block 55826350 to 55826599...
tee-client-1  | Querying from block 55826600 to 55826849...
tee-client-1  | Querying from block 55826850 to 55827099...
tee-client-1  | Querying from block 55827100 to 55827349...
tee-client-1  | Querying from block 55827350 to 55827599...
tee-client-1  | Querying from block 55827600 to 55827849...
tee-client-1  | Querying from block 55827850 to 55828099...
tee-client-1  | Querying from block 55828100 to 55828349...
tee-client-1  | Querying from block 55828350 to 55828599...
tee-client-1  | Querying from block 55828600 to 55828849...
tee-client-1  | Querying from block 55828850 to 55829099...
tee-client-1  | Querying from block 55829100 to 55829349...
tee-client-1  | Querying from block 55829350 to 55829599...
tee-client-1  | Querying from block 55829600 to 55829849...
tee-client-1  | Querying from block 55829850 to 55830099...
tee-client-1  | Querying from block 55830100 to 55830349...
tee-client-1  | Querying from block 55830350 to 55830599...
tee-client-1  | Querying from block 55830600 to 55830849...
tee-client-1  | Querying from block 55830850 to 55831099...
tee-client-1  | Querying from block 55831100 to 55831349...
tee-client-1  | Querying from block 55831350 to 55831599...
tee-client-1  | Querying from block 55831600 to 55831849...
tee-client-1  | Querying from block 55831850 to 55832099...
tee-client-1  | Querying from block 55832100 to 55832349...
tee-client-1  | Querying from block 55832350 to 55832599...
tee-client-1  | Querying from block 55832600 to 55832849...
tee-client-1  | Querying from block 55832850 to 55833099...
tee-client-1  | Querying from block 55833100 to 55833349...
tee-client-1  | Querying from block 55833350 to 55833599...
tee-client-1  | Querying from block 55833600 to 55833849...
tee-client-1  | Querying from block 55833850 to 55834099...
tee-client-1  | Querying from block 55834100 to 55834349...
tee-client-1  | Querying from block 55834350 to 55834497...
tee-client-1  | Rewards mapping: {
tee-client-1  |   '0x8818f8db406f1d35caed8fe2b39b67c559d7127b': 100n,
tee-client-1  |   '0xf0126ba2c20e11a2ede87518afc4d8e7e12e3de4': 100n
tee-client-1  | }
tee-client-1  | Merkle tree finalized !!!
tee-client-1  | Server is running on port 3000
